from fastapi import FastAPI
from app.core.config import settings
from app.core.middleware import register_middlewares
from app.auth.routes import router as auth_router
from app.audit.routes import router as audit_router

def create_app()
    app = FastAPI(
    title="EMR Platform Core",
    version="0.1.0",
    docs_url="/docs" if settings.DEBUG else None,
    redoc_url=None
    )

    register_middlewares(app)

    app.include_router(auth_router, prefix="/auth", tags=["Auth"])
    app.include_router(audit_router, prefix="/audit", tags=["Audit"])

    return app

    app = create_app()
